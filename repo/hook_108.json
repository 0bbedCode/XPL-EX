{"builtin":false,"collection":"Fif","group":"Utilities","name":"DownloadHelper.downloadTextContent","author":"Fif_ on XDA.","version":1,"description":"This hook has nothing to do with privacy.  It fixes the \"Explain xkcd\" feature of the \"xkcd Browser\" (com.floern.xkcd) app version 4.2 (24).\n\"xkcd Browser\" is a fine app, but it hasn't been maintained in a while and the \"Explain XKCD\" feature is broken and shows a 301 HTTP error.  This hook will fix the \"Explain XKCD\" button.\nNote that this hook will only show up for and can only be applied to the \"xkcd Browser\" app version 4.2 (24).\n\nInstructions:\n1. Download this hook.\n2. Make sure that the Fif collection is enabled in XPL Pro.\n3. In XPL, navigate to the \"xkcd Browser\"  app, and expand the restriction categories.\n4.a. Check the \"Utilities\" category.\n4.b. Or, alternately, enable DownloadHelper.downloadTextContent hook for \"xkcd Browser\" in XPL Pro.\n\nChangelog:\n\nv1 - 2019-05-25\nFirst public release.\n","className":"com.floern.xkcd.utils.DownloadHelper","methodName":"downloadTextContent","parameterTypes":["java.lang.String","java.lang.String"],"returnType":"java.lang.String","minSdk":1,"maxSdk":999,"minApk":24,"maxApk":24,"excludePackages":"^(?!com\\.floern\\.xkcd$).*","enabled":true,"optional":false,"usage":true,"notify":false,"luaScript":"-- DownloadHelper.downloadTextContent is a set of Lua hook definition\n-- designed to work with XPrivacyLua.\n\n-- DownloadHelper.downloadTextContent is free software: you can\n-- redistribute it and\/or modify it under the terms of the GNU General\n-- Public License as published by the Free Software Foundation, either\n-- version 3 of the License, or (at your option) any later version.\n\n-- DownloadHelper.downloadTextContent is distributed in the hope\n-- that it will be useful, but WITHOUT ANY WARRANTY; without even\n-- the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR\n-- PURPOSE.  See the GNU General Public License for more details.\n\nfunction before(hook, param)\n    local url = param:getArgument(0)\n    local fake, replaced\n    fake, replaced = url:gsub('^http:(\/\/www.explainxkcd.com\/wiki\/index.php[?]title=)', 'https:%1')\n\n    if replaced > 0 then\n        param:setArgument(0, fake)\n        return true, url, fake\n    else\n        return false\n    end\nend\n"}