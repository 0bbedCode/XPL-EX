{"builtin":false,"collection":"Privacy","group":"Read.Network","name":"TelephonyManager.getCellLocation","author":"M66B,hKFirEs","version":4,"description":"Replace the built-in hook to fake cid and lac with getCellLocation method,for gsm users only.Don't use with my previous getCID and getLAC hooks simultaneously.Setting must match exactly like \"LAC,CID\",for example,\"26550,187363073\".If you want to get a fake location by Celluar,you should also download and enable my modified getNetworkOperator hook definition.","className":"android.telephony.TelephonyManager","methodName":"getCellLocation","parameterTypes":[],"returnType":"android.telephony.CellLocation","minSdk":1,"maxSdk":999,"minApk":0,"maxApk":2147483647,"enabled":true,"optional":false,"usage":true,"notify":false,"luaScript":"\n-- This file is part of XPrivacyLua.\n\n-- XPrivacyLua is free software: you can redistribute it and\/or modify\n-- it under the terms of the GNU General Public License as published by\n-- the Free Software Foundation, either version 3 of the License, or\n-- (at your option) any later version.\n\n-- XPrivacyLua is distributed in the hope that it will be useful,\n-- but WITHOUT ANY WARRANTY; without even the implied warranty of\n-- MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n-- GNU General Public License for more details.\n\n-- You should have received a copy of the GNU General Public License\n-- along with XPrivacyLua.  If not, see <http:\/\/www.gnu.org\/licenses\/>.\n\n-- Copyright 2017-2018 Marcel Bokhorst (M66B)\n\nfunction after(hook, param)\n    local result = param:getResult()\n    if result == nil then\n        return false\n    end\n\n    local null\n\n    local setting = param:getSetting(\"LAC,CID\")\n    if setting == nil then\n    \tparam:setResult(null)\n    \treturn true, result:toString(), null\n    end\n\n    local index = string.find(setting,\",\",1,true)\n    if index == nil then\n    \tparam:setResult(null)\n    \treturn true, result:toString(), null\n    end\n\n    local fakelac = tonumber(string.sub(setting,1,index-1))\n    local fakecid = tonumber(string.sub(setting,index+1,-1))\n\n    if fakecid == nil or fakelac == nil then\n        param:setResult(null)\n        return true, result:toString(), null\n    end\n\t\n    local fake = luajava.newInstance('android.telephony.gsm.GsmCellLocation')\n    fake:setLacAndCid(fakelac, fakecid)\n    param:setResult(fake)\n    return true, result:toString(), fake:toString()\nend\n","settings":["LAC,CID"]}