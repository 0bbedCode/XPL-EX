{"builtin":false,"collection":"Intika-WL-Notifications-BQS","group":"Whitelist notifications","name":"StatusBarNotification.getNotification","author":"Intika","version":3,"description":"Name:\nWhitelist notifications (for Bottom Quick Settings app)\n@intikaa (telegram)\n\nHook Part: \n01\/01\n\nDescription: \nThis is limited to the app Bottom Quick Settings, it allows the usage of a whitelist instead of a blocklist for the notifications, just add the package(s) name(s) of your whitelisted app(s) on the settings after enabling the hook. We can add multiple packages names separated by a space, also the packages names can be full or partial.\n\nExample 1: 'com.some.packge' or just 'some' (without quotes)\nExample 2: 'com.myapp1.de com.myapp2.de com.myapp3.de'\nExample 3: 'myapp1 myapp2 myapp3' (text from the package string)\n\nBased on:\nHooks from: M66B\n\nLinks:\nhttps:\/\/github.com\/intika\n\nDocumentation:\nhttps:\/\/docs.microsoft.com\/en-us\/dotnet\/api\/android.app.notification?view=xamarin-android-sdk-11\n\nChangelog:\nv3: adding multiple package filter \nv2: package name comparison changed to 'if contain' and thus full package name is not required anymore\nv1: initial release","className":"android.service.notification.StatusBarNotification","methodName":"getNotification","parameterTypes":[],"returnType":"android.app.Notification","minSdk":18,"maxSdk":999,"minApk":0,"maxApk":2147483647,"excludePackages":"^(?!com.tombayley.bottomquicksettings$).*","enabled":true,"optional":false,"usage":true,"notify":false,"luaScript":"-- This is free software: you can redistribute it and\/or modify\n-- it under the terms of the GNU General Public License as published by\n-- the Free Software Foundation, either version 3 of the License, or\n-- (at your option) any later version.\n\n-- This is distributed in the hope that it will be useful,\n-- but WITHOUT ANY WARRANTY; without even the implied warranty of\n-- MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n-- GNU General Public License for more details.\n\n-- You should have received a copy of the GNU General Public License\n-- along with XPrivacyLua.  If not, see <http:\/\/www.gnu.org\/licenses\/>.\n\n-- Copyright 2017-2019 Marcel Bokhorst (M66B)\n-- Copyright 2022 Intika\n\nfunction after(hook, param)\n    local result = param:getResult()\n    if result == nil or result.length == 0 then\n        return false\n    end\n\n    local list = param:getSetting(\"BQS notifications whitelist packages names\")\n\n    local this = param:getThis()\n\n    if list == nil or this == nil then\n        return false\n    end\n\n    local pkg = this.pkg\n\n    -- log('xxxx' .. pkg .. list)\n\n    if pkg == nil then\n        return false\n    end\n\n    local match = false\n    for item in string.gmatch(list, \"[^%s]+\") do\n        if pkg:find(item, 1, true) then\n            match = true\n        end\n    end\n\n    if match == true then\n        return false\n    end\n\n    param:setResult(nil)\n    return true\n\nend\n","settings":["BQS notifications whitelist packages names"]}