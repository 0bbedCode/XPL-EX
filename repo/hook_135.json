{"builtin":false,"collection":"Fif","group":"Prevent downgrades","name":"PackageManagerService.checkDowngrade\/30","author":"Fif_","version":1,"description":"This hook has nothing to do with privacy.  When enabled, it allows the Android Package Manager to downgrade any app (possibly with loss of app data).  By default, downgrading is not allowed.\n\nThis hook is for Android 11 and above.\nCheck out the PackageManagerService.checkDowngrade hook for Android 10 and prior.\n\nInstructions:\n1. Download this hook.\n2. Make sure that the Fif collection is enabled in XPL Pro.\n3. In XPL, navigate to the \"Android System\" app (you may have to change the filter to \"Show all apps\" first), and expand the restriction categories.\n4.a. Check the \"Prevent downgrades\" category.\n4.b. Or, alternately, enable PackageManagerService.checkDowngrade\/30 hook for \"Android System\" in XPL Pro.\n\nChangelog:.\n\nv1 - 2021-09-09\nFirst public release.","className":"com.android.server.pm.PackageManagerService","methodName":"checkDowngrade","parameterTypes":["com.android.server.pm.parsing.pkg.AndroidPackage","android.content.pm.PackageInfoLite"],"returnType":"void","minSdk":30,"maxSdk":999,"minApk":0,"maxApk":2147483647,"excludePackages":"^(?!android$).*","enabled":true,"optional":false,"usage":true,"notify":false,"luaScript":"-- PackageManagerService.checkDowngrade\/30 is a Lua hook definition \n-- designed to work with XPrivacyLua.\n\n-- PackageManagerService.checkDowngrade\/30 is free software: you can redistribute it and\/or modify\n-- it under the terms of the GNU General Public License as published by\n-- the Free Software Foundation, either version 3 of the License, or\n-- (at your option) any later version.\n\n-- PackageManagerService.checkDowngrade\/30 is distributed in the hope that it will be useful,\n-- but WITHOUT ANY WARRANTY; without even the implied warranty of\n-- MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n-- GNU General Public License for more details.\n\n-- You should have received a copy of the GNU General Public License\n-- along with XPrivacyLua.  If not, see <http:\/\/www.gnu.org\/licenses\/>.\n\n-- Copyright (C) 2021 Philippe Troin (Fif_ on XDA)\n\nfunction before(hook, param)\n    param:setResult(nil)\n    return true\nend\n"}